.question id="question_#{@question.id}"
  h4= @question.title
  p.content= @question.content
  p=raw @question.tag_list.map { |t| link_to t, tag_path(t), class: "label label-primary" }.join(' ')
  p
  ul
    - @question.attachments.each do |a|
      li= link_to a.file.identifier, a.file.url

  p
    | Comment your question
    .comments
      = render partial: 'comments/list', locals: {commentable: @question}

  - if @question.user == current_user
      .meta_block
        small= link_to 'Edit', '', class: 'edit-question-link', data: { question_id: @question.id }
      .meta_block
        small= link_to 'Delete', question_path(@question), method: :delete, data: {confirm: 'Are you sure?'}
      p
        = form_for @question, remote: true, html: { id: "edit-question-#{@question.id}"} do |f|
          = f.label :content, "Question"
          = f.text_area :content
          = f.submit 'Save'

  .answers
    = render 'answers'

  = nested_form_for [@question, @answer], remote: true do |f|
    p 
      = f.label :content, 'Your answer'
      .answer_errors
      = f.text_area :content

    p
      = f.link_to_add "Add a file", :attachments

    p
      = f.fields_for :attachments do |a|
        = a.label :file
        = a.file_field :file
        = a.link_to_remove "Remove this file"

    

    p= f.submit 'Create'
